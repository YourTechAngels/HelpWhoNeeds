(this["webpackJsonpyta-helpwhoneeds-frontend"]=this["webpackJsonpyta-helpwhoneeds-frontend"]||[]).push([[0],{433:function(e,t,a){},434:function(e,t,a){},699:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(0),o=a.n(s),i=a(17),r=a.n(i),c=(a(433),a(434),a(16)),l=a.n(c),d=a(29),u=a(9),j=a(18),b=a(327),h=a(417),p=a(328),m=a(329),O=a(726),g=a(727),f=a(330),x=a(95),v=a(261),y=a(260),w=a(404),k=a(331),C=a(403),S=a.n(C),T=a(32),D=a(25),N=a(402),P=(a(436),N.a.initializeApp({apiKey:"AIzaSyAQD-Hez1rIIaIlTYomLubx8QCfjmH9iNQ",authDomain:"helpwhoneeds-dev.firebaseapp.com",projectId:"helpwhoneeds-dev",storageBucket:"helpwhoneeds-dev.appspot.com",messagingSenderId:"610243223694",appId:"1:610243223694:web:2fc8ba826f29471e54e9df"})),q=P.auth(),A=o.a.createContext();function I(){return Object(s.useContext)(A)}function R(e){var t=e.children,a=Object(s.useState)(),o=Object(u.a)(a,2),i=o[0],r=o[1],c=Object(s.useState)(!0),l=Object(u.a)(c,2),d=l[0],j=l[1];Object(s.useEffect)((function(){return q.onAuthStateChanged((function(e){r(e),j(!1)}))}),[]);var b={currentUser:i,login:function(e,t){return q.signInWithEmailAndPassword(e,t)},signup:function(e,t){return q.createUserWithEmailAndPassword(e,t)},signout:function(){return q.signOut()},resetPassword:function(e){return q.sendPasswordResetEmail(e)},updateEmail:function(e){return i.updateEmail(e)},updatePassword:function(e){return i.updatePassword(e)}};return Object(n.jsx)(A.Provider,{value:b,children:!d&&t})}var _=Object(b.a)((function(e){return{root:{flexGrow:1,"& > svg":{margin:e.spacing(2)}},title:{flexGrow:1},appBar:{backgroundColor:"#9370db"}}}));function F(e){return Object(n.jsx)(h.a,Object(j.a)(Object(j.a)({},e),{},{children:Object(n.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}))}var L=function(){var e=_(),t=I(),a=t.currentUser,i=t.signout,r=o.a.useState(!1),c=Object(u.a)(r,2),j=c[0],b=c[1],h=o.a.useState(null),C=Object(u.a)(h,2),N=C[0],P=C[1];Object(s.useEffect)((function(){b(null!==a)}),[a]),a&&(console.log(a.email),console.log(a.uid)),console.log("auth"+j);var q=Boolean(N),A=Object(T.g)(),R=function(){P(null)};function L(){return(L=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:b(!1),A.push("/HelpWhoNeeds"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),b(null!==a),console.log(e.t0),alert("failed to log out");case 12:console.log("auth"+j),R();case 14:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(p.a,{children:Object(n.jsx)(m.a,{control:Object(n.jsx)(O.a,{checked:j,onChange:function(e){b(e.target.checked)},"aria-label":"login switch"}),label:j?"Logout":"Login"})}),Object(n.jsx)(g.a,{position:"static",className:e.appBar,children:Object(n.jsxs)(f.a,{children:[Object(n.jsx)(F,{color:"action",fontSize:"large",onClick:function(e){return window.location.href="/helpwhoneeds/"}}),Object(n.jsx)(x.a,{variant:"h6",className:e.title,children:"Help Who Needs"}),Object(n.jsx)(v.a,{color:"inherit",component:D.b,to:"/about",children:"About"}),Object(n.jsx)(v.a,{color:"inherit",component:D.b,to:"/contact",children:"Contact"}),j&&Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){P(e.currentTarget)},color:"inherit",children:Object(n.jsx)(S.a,{})}),Object(n.jsxs)(w.a,{id:"menu-appbar",anchorEl:N,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:q,onClose:R,children:[Object(n.jsx)(k.a,{onClick:function(){A.push("/profile"),R()},children:"Profile"}),Object(n.jsx)(k.a,{onClick:function(){return L.apply(this,arguments)},children:"Sign Out"})]})]})]})})]})},E=Object(b.a)({button:{margin:"10px"},pInfo:{textAlign:"center"},divContentWrapper:{textAlign:"center",minHeight:"100%",paddingLeft:"50px"}}),W=function(){var e=E(),t=I().currentUser,a=Object(T.g)();return Object(n.jsxs)("div",{className:e.divContentWrapper,children:[Object(n.jsx)("h1",{children:"Help Who Needs"}),Object(n.jsx)("p",{children:"Our TechForGood project aims to match a volunteer with a vulnerable person who is shielding in these unprecedented times. Hence our application is called HelpWhoNeeds. The app will aim to match a volunteer with a vulnerable person in their immediate local area helping with chores such as shopping, GP visits, prescriptions, dog walking or just some social contact with the appropriate measures in place. We hope this app brings some comfort and relief to the users with a sense of moral and social obligation."}),Object(n.jsxs)("p",{className:e.pInfo,children:[" If you would like help or need any assistance using our system, please call ",Object(n.jsx)("strong",{children:"0800 123 4567"}),"."]}),Object(n.jsx)(v.a,{className:e.button,variant:"outlined",color:"default",onClick:function(){t?a.push("/requestee/tasks"):a.push("/login/requestee")},children:"I need Help"}),Object(n.jsx)(v.a,{className:e.button,variant:"outlined",color:"default",onClick:function(){t?a.push("/myTask"):a.push("/login/volunteer")},children:"I can Help"})]})},B=a(729),M=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{align:"center",children:" Legal"}),Object(n.jsx)(B.a,{container:!0,"flex-start":"left",children:Object(n.jsxs)(x.a,{color:"inherit",noWrap:!0,children:[Object(n.jsx)("p",{children:"Your data and GDPR "}),Object(n.jsx)("p",{children:"End-user privacy"}),Object(n.jsx)("p",{children:"Intellectual property (IP) rights."}),Object(n.jsx)("p",{children:"Advertising and promotions"}),Object(n.jsx)("p",{children:"Users of this app must be 18 or over"})]})})]})},U=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Cookies"}),Object(n.jsx)("p",{children:"Cookie Policy We use cookies, including from our partners, to enhance and personalise your experience. Accept all cookies below, or select \u201cManage Cookies\u201d to view our Cookie Policy and choose which cookies we can use."}),Object(n.jsx)("p",{children:" Cookies are used for a variety of things that help improve your online experience. Some cookies help make sure your information is secure when using our services while keeping our forms and site easy to use."})]})},H=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Support"}),Object(n.jsx)("p",{children:"Please call us anytime for help and support. 0800 123 4567"})]})},Y=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Privacy Policy"}),Object(n.jsx)("p",{children:"YourTechAngels is committed to protecting and respecting your privacy. This notice describes what personal data we collect, how we will use that data and how we keep your data safe. For additional information on how we use cookies, please refer to our Cookie Policy. For all other information regarding our services, please refer to our Terms & Conditions. Transparency and informing the public about how their data are being used are two basic goals of the GDPR."}),Object(n.jsx)("p",{children:"  In this Privacy Notice we will cover: "}),Object(n.jsx)("p",{children:"  Who is the data controller?   "}),Object(n.jsx)("p",{children:" What personal data do we process, for which purpose and what is our legal basis for processing it?  "}),Object(n.jsx)("p",{children:" Who will process your data?"}),Object(n.jsx)("p",{children:" Data transfer outside the European Union"}),Object(n.jsx)("p",{children:"  How long do we keep your data?   "}),Object(n.jsx)("p",{children:"  Your rights      "}),Object(n.jsx)("p",{children:" Security "}),Object(n.jsx)("p",{children:" We collect data from you when you visit our websites or while using our associated apps (\u201cwebsites and Apps\u201d). The data we collect includes your name, email address, telephone number and shipping/billing address, your day and month of birth, your favorite designers and information regarding your browsing and shopping behaviour. Data is collected when you place an order, call our Customer Care team, register with us, opt into our marketing communications, browse our site and use other services offered by our site. The data we collect is used to take your order, process payment and deliver your purchase to you. We also use it to deliver marketing communications, give access to services for registered users, personalize your visit to our site and provide assistance via our Customer Care team."}),Object(n.jsx)("p",{children:"We must have a valid reason for processing your personal data and we may not collect, store or use data about you that is not compatible with that reason. There are four valid reasons for our use of your personal data: Performance of a Contract, our Legitimate Interests as a business, a Legal Obligation we are required to follow and Consent which you provide to us."}),Object(n.jsx)("p",{children:"If you have given your consent to our use of your personal data, you are entitled to withdraw this consent at any time."})]})},V=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Terms & Conditions"}),Object(n.jsx)("p",{children:"These are our Terms & Conditions. "}),Object(n.jsx)("p",{children:"What\u2019s covered in these terms "}),Object(n.jsx)("p",{children:" We know it\u2019s tempting to skip these Terms of Service, but it\u2019s important to establish what you can expect from us as you use our services, and what we expect from you."}),Object(n.jsx)("p",{children:"These Terms of Service reflect the way that our business works, the laws that apply to our company, and certain things that we\u2019ve always believed to be true. As a result, these Terms of Service help define our relationship with you as you interact with our services. For example, these terms include the following topic headings:"}),Object(n.jsx)("p",{children:"What you can expect from us, which describes how we provide and develop our services What we expect from you, which establishes certain rules for using our services Content in services, which describes the intellectual property rights to the content that you find in our services \u2013 whether that content belongs to you, us or others In case of problems or disagreements, which describes other legal rights that you have, and what to expect in case someone violates these terms."}),Object(n.jsx)("p",{children:" Understanding these terms is important because, to use our services, you must accept these terms. Besides these terms, we also publish a Privacy Policy. Although it\u2019s not part of these terms, we encourage you to read it to better understand how you can update, manage, export and delete your information."}),Object(n.jsx)("p",{children:"Service provider"}),"YourTechAngels services are provided by, and you\u2019re contracting with: YourTechAngels organised under the laws of the United Kingsdom and operating under the laws of the UK XX Street, London, UK",Object(n.jsx)("p",{children:"Age requirements"}),Object(n.jsx)("p",{children:"If you\u2019re under the age required to manage your own, you must have your parent or legal guardian\u2019s permission to use this account. Please ask your parent or legal guardian to read these terms with you. If you\u2019re a parent or legal guardian, and you allow your child to use the services, then these terms apply to you and you\u2019re responsible for your child\u2019s activity on the services. Some services have additional age requirements as described in their service-specific additional terms and policies."})]})},z=Object(b.a)({button:{margin:"10px"},pInfo:{textAlign:"center"},divContentWrapper:{textAlign:"center",minHeight:"100%",paddingLeft:"50px"}}),G=function(){var e=z();return Object(n.jsxs)("div",{className:e.divContentWrapper,children:[Object(n.jsx)("h1",{children:"YourTechAngels - Project HelpWhoNeeds"}),Object(n.jsx)("p",{children:"Established in 2020, Your Tech Angels is a collaborative team of 4 engineers who are involved and interested in technology.  Our aim is to use technology to help others especially during the Covid 19 pandemic. This is the motivation behind our HelpWhoNeeds project that assists the shielding population in the UK with everyday assistance such as delivering groceries or prescriptions, dog walking or even just a chat. The app we are building will help those who need to find a volunteer match in their local areas - near their vicinity based on their post code during lockdown and other times too."}),Object(n.jsxs)("p",{className:e.pInfo,children:[" You can request Volunteer help 24x7 - ",Object(n.jsx)("strong",{children:"0800 123 4567"})]}),Object(n.jsxs)(B.a,{container:!0,direction:"row",spacing:4,justify:"center",children:[Object(n.jsxs)(B.a,{item:!0,xs:12,sm:2,children:[Object(n.jsx)(D.b,{to:"/legal",variant:"body2",children:"Legal"})," "]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:2,children:[Object(n.jsx)(D.b,{to:"/cookie",variant:"body2",children:"Cookies"})," "]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:2,children:[Object(n.jsx)(D.b,{to:"/support",variant:"body2",children:"Support"})," "]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:2,children:[Object(n.jsxs)(D.b,{to:"/termconditions",variant:"body2",children:["Terms","&","Conditions"]})," "]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:2,children:[Object(n.jsx)(D.b,{to:"/privacy",variant:"body2",children:"Privacy"})," "]})]})]})},K=a(332),Q={textFld:{width:"85%",minHeight:40,paddingLeft:8},button:{border:"4px",fontWeight:"bold",marginLeft:10,marginTop:"10px"},divContentWrapper:{textAlign:"center",minHeight:"100%",paddingLeft:"50px"}},J=function(){var e=Object(s.useState)("Submit"),t=Object(u.a)(e,2),a=t[0],o=t[1],i=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n,s,i,r,c,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o("Sending..."),a=t.target.elements,n=a.name,s=a.email,i=a.message,r={name:n.value,email:s.value,message:i.value},e.next=6,fetch("http://localhost:5000/contact",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)});case 6:return c=e.sent,o("Submit"),e.next=10,c.json();case 10:d=e.sent,alert(d.status);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("form",{onSubmit:i,children:Object(n.jsxs)("div",{children:[Object(n.jsxs)(B.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:10,children:[Object(n.jsx)(B.a,{item:!0,xs:12,children:Object(n.jsx)(K.a,{required:!0,id:"name",type:"text",name:"Name",label:"Name",variant:"outlined",inputProps:{maxLength:20},style:Q.textFld})}),Object(n.jsx)(B.a,{item:!0,xs:12,children:Object(n.jsx)(K.a,{required:!0,id:"email",type:"text",name:"Email",label:"Email",variant:"outlined",inputProps:{maxLength:20},style:Q.textFld})}),Object(n.jsx)(B.a,{item:!0,xs:12,children:Object(n.jsx)(K.a,{required:!0,id:"message",type:"text",name:"Message",label:"Message",variant:"outlined",inputProps:{maxLength:100},style:Q.textFld,multiline:!0,rows:10})})]}),Object(n.jsx)(B.a,{container:!0,justify:"left",alignItems:"left",spacing:3,children:Object(n.jsx)(B.a,{item:!0,xs:12,children:Object(n.jsxs)(v.a,{color:"default",variant:"outlined",type:"submit",children:[a," "]})})})]})})},X=Object(b.a)({footer:{boxSizing:"border-box",height:"50px",padding:"15px",backgroundColor:"#eee",borderTop:"1px solid #e0e0e0",position:"absolute",width:"100%",textAlign:"center"}});var Z=function(){var e=X();return Object(n.jsx)("footer",{className:e.footer,children:Object(n.jsxs)("div",{children:["Made by ",Object(n.jsx)("a",{href:"https://github.com/YourTechAngels",children:"YourTechAngels"})]})})},$=a(743),ee=a(731),te=a(395),ae=a(741),ne=a(732),se=a(259),oe=a(130),ie=a.n(oe),re=a(730);function ce(){return Object(n.jsxs)(x.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(D.b,{color:"inherit",to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var le=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function de(){var e=le(),t=Object(T.h)().userType,a=Object(s.useRef)(),o=Object(s.useRef)(),i=I(),r=i.login,c=i.currentUser,j=Object(s.useState)(""),b=Object(u.a)(j,2),h=b[0],p=b[1],O=Object(s.useState)(""),g=Object(u.a)(O,2),f=g[0],y=g[1],w=Object(s.useState)(""),k=Object(u.a)(w,2),C=k[0],S=k[1],N=Object(s.useState)(!1),P=Object(u.a)(N,2),q=P[0],A=P[1],R=Object(T.g)(),_="AssistanceRequester"==="".concat(t)?"Requestee":"".concat(t);function F(){return(F=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,p(""),A(!0),e.next=6,r(a.current.value,o.current.value);case 6:"volunteer"==="".concat(t)?(R.push("/mytask"),console.log("/helpwhoneeds")):R.push("/requestee/tasks"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p("Failed to log in");case 12:A(!1),c&&(y(c.email),S(c.ui),console.log(f),console.log(C));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(n.jsxs)(re.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(ee.a,{}),Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)($.a,{className:e.avatar,children:Object(n.jsx)(ie.a,{})}),Object(n.jsxs)(x.a,{component:"h1",variant:"h5",children:[_," Sign in"]}),h&&Object(n.jsx)(ae.a,{severity:"error",children:Object(n.jsxs)(ne.a,{children:["Error: ",h]})}),Object(n.jsxs)("form",{onSubmit:function(e){return F.apply(this,arguments)},children:[Object(n.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"email",inputRef:a,id:"email",label:"Email Address",autoFocus:!0}),Object(n.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",inputRef:o,label:"Password",id:"password"}),Object(n.jsx)(m.a,{control:Object(n.jsx)(te.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(n.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:q,children:"Sign In"}),Object(n.jsxs)(B.a,{container:!0,children:[Object(n.jsx)(B.a,{item:!0,xs:!0,children:Object(n.jsx)(D.b,{to:"/forgotPassword/".concat(t),variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(B.a,{container:!0,children:Object(n.jsx)(B.a,{item:!0,xs:!0,children:Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:["New User ?",Object(n.jsx)(D.b,{to:"/signup/".concat(t),variant:"body2",children:"Sign Up "})]})})})]})]})]}),Object(n.jsx)(se.a,{mt:8,children:Object(n.jsx)(ce,{})})]})}function ue(){return Object(n.jsxs)(x.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(D.b,{color:"inherit",to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var je=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function be(){var e=Object(s.useRef)(),t=Object(s.useRef)(),a=Object(s.useRef)(),o=I().signup,i=Object(s.useState)(""),r=Object(u.a)(i,2),c=r[0],j=r[1],b=Object(s.useState)(!1),h=Object(u.a)(b,2),p=h[0],m=h[1],O=Object(T.g)(),g=je(),f=Object(T.h)().user;function y(){return(y=Object(d.a)(l.a.mark((function n(s){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.preventDefault(),console.log(e.current.value,t.current.value,a.current.value),t.current.value===a.current.value){n.next=4;break}return n.abrupt("return",j("Passwords does not match"));case 4:return n.prev=4,j(""),m(!0),n.next=9,o(e.current.value,t.current.value);case 9:O.push("/registrationpage/".concat(f)),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),j("Failed to create an account");case 15:m(!1);case 16:case"end":return n.stop()}}),n,null,[[4,12]])})))).apply(this,arguments)}return Object(n.jsxs)(re.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(ee.a,{}),Object(n.jsxs)("div",{className:g.paper,children:[Object(n.jsx)($.a,{className:g.avatar,children:Object(n.jsx)(ie.a,{})}),Object(n.jsx)(x.a,{component:"h1",variant:"h5",children:"Sign Up"}),c&&Object(n.jsx)(ae.a,{severity:"error",children:Object(n.jsxs)(ne.a,{children:["Error: ",c]})}),Object(n.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},children:[Object(n.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"email",inputRef:e,id:"email",label:"Email Address",autoFocus:!0}),Object(n.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",inputRef:t,label:"Password",id:"password"}),Object(n.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",inputRef:a,label:"Confirm Password",id:"passwordConfirm"}),Object(n.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",disabled:p,color:"primary",children:"Sign Up"})]})]}),"  ",Object(n.jsx)(se.a,{mt:8,children:Object(n.jsx)(ue,{})})]})}var he=a(27),pe=a(58),me=a(26),Oe=a.n(me),ge=a(263),fe=a(264),xe=a(265),ve=a(734),ye=a(733),we=Object(b.a)((function(e){return{root:{top:e.spacing(15)}}}));var ke=function(e){var t=we(),a=e.notify,s=e.setNotify,o=e.verticalPosTop,i=function(e,t){"clickaway"!==t&&s(Object(j.a)(Object(j.a)({},a),{},{isOpen:!1}))};return Object(n.jsx)(ye.a,{className:t.root,open:a.isOpen,autoHideDuration:2e3,anchorOrigin:{vertical:o?"top":"bottom",horizontal:"center"},onClose:i,children:Object(n.jsx)(ae.a,{severity:a.type,onClose:i,children:a.message})})},Ce={textFld:{width:"85%",height:40,paddingLeft:8},button:{border:"4px",fontWeight:"bold",alignItems:"center",marginRight:"20px",marginTop:"10px"}};function Se(e){var t=Object(s.useState)({initialInputState:{firstName:"",lastName:"",dateOfBirth:"",phoneNumber:"",postcode:"",address1:"",address2:"",city:"",county:"",email:""}}),a=Object(u.a)(t,2),i=a[0],r=a[1],c=i.firstName,b=i.lastName,h=i.dateOfBirth,p=i.phoneNumber,g=i.postcode,f=i.address1,x=i.address2,y=i.city,w=i.county,k=i.email,C=Object(s.useState)(""),S=Object(u.a)(C,2),N=S[0],P=S[1],q=Object(s.useRef)(),A=Object(s.useRef)(),R=Object(s.useRef)(),_=Object(s.useRef)(),F=Object(s.useRef)(),L=Object(s.useRef)(),E=Object(s.useRef)(),W=Object(s.useRef)(),M=I(),U=M.currentUser,H=M.updatePassword,Y=M.updateEmail,V=U.uid,z=(U.email,Object(s.useState)(!1)),G=Object(u.a)(z,2),Q=G[0],J=G[1],X=o.a.useState(!0),Z=Object(u.a)(X,2),$=(Z[0],Z[1],Object(s.useState)("")),ee=Object(u.a)($,2),se=ee[0],oe=ee[1],ie=Object(s.useState)(""),re=Object(u.a)(ie,2),ce=re[0],le=re[1],de=Object(s.useState)(""),ue=Object(u.a)(de,2),je=ue[0],be=ue[1],me=Object(s.useState)(""),ye=Object(u.a)(me,2),we=ye[0],Se=ye[1],Te=Object(s.useState)(""),De=Object(u.a)(Te,2),Ne=De[0],Pe=De[1],qe=Object(s.useState)(!1),Ae=Object(u.a)(qe,2),Ie=Ae[0],Re=Ae[1],_e=Object(s.useState)(""),Fe=Object(u.a)(_e,2),Le=Fe[0],Ee=Fe[1],We=Object(s.useState)(""),Be=Object(u.a)(We,2),Me=Be[0],Ue=Be[1],He=Object(s.useState)(!1),Ye=Object(u.a)(He,2),Ve=Ye[0],ze=Ye[1],Ge=Object(s.useState)(""),Ke=Object(u.a)(Ge,2),Qe=Ke[0],Je=Ke[1],Xe=Object(s.useState)(!1),Ze=Object(u.a)(Xe,2),$e=Ze[0],et=Ze[1],tt=(Object(T.g)(),o.a.useState(!1)),at=Object(u.a)(tt,2),nt=(at[0],at[1],Object(s.useState)()),st=Object(u.a)(nt,2),ot=st[0],it=st[1],rt=Object(s.useState)(),ct=Object(u.a)(rt,2),lt=ct[0],dt=ct[1],ut=Object(s.useState)(),jt=Object(u.a)(ut,2),bt=jt[0],ht=jt[1],pt=Object(s.useState)(),mt=Object(u.a)(pt,2),Ot=mt[0],gt=mt[1],ft=Object(s.useState)(!0),xt=Object(u.a)(ft,2),vt=xt[0],yt=xt[1],wt=Object(s.useState)({isOpen:!1,message:" ",type:" "}),kt=Object(u.a)(wt,2),Ct=kt[0],St=kt[1];Object(s.useEffect)((function(){Oe.a.get("https://letmeknow.uk/api/accounts/get_user_by_id/",{params:{uid:V}}).then((function(e){var t=e.data[0];console.log(t);var a={firstName:"".concat(t.first_name),lastName:"".concat(t.last_name),dateOfBirth:"".concat("1900-01-01"===t.date_of_birth?"":t.date_of_birth),phoneNumber:"".concat(t.phone_number),postcode:"".concat(t.post_code),address1:"".concat(t.address_line_1),address2:"".concat(t.address_line_2),city:"".concat(t.city),county:"".concat(t.county),email:"".concat(t.email)};r({lastName:a.lastName,firstName:a.firstName,dateOfBirth:a.dateOfBirth,postcode:a.postcode,phoneNumber:a.phoneNumber,address1:a.address1,address2:a.address2,city:a.city,county:a.county,email:a.email}),Ue(t.id),console.log(t.is_volunteer),ze(t.is_volunteer),J(t.dbs),gt(t.latitude),ht(t.longitude),yt(t.is_available),console.log(t.dbs),console.log("Is Available"),console.log(t.is_available),console.log(i),console.log(Ot+""+bt),console.log(Ve+" "+Q)})).catch((function(e){console.log("error"),console.log(e.request),console.log(e.config),console.log(e.message)}))}),[V]);var Tt=function(e){r(Object(j.a)(Object(j.a)({},i),{},Object(pe.a)({},e.target.name,e.target.value)))},Dt=function(e){console.log("inside check handle"+Q),J(e.target.checked),console.log("after setting falsefor dbs "+Q)};function Nt(){return(Nt=Object(d.a)(l.a.mark((function e(t){var a,n,s,o,r,c,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=""===se?F.current.value:se,n=""===ce?L.current.value:ce,s=""===we?E.current.value:we,o=""===je?W.current.value:je,r=""===h?"1900-01-01":h,c=""===Le?k:U.email,console.log(c),console.log(a+""+n+" "+s+" "+o),console.log(q.current.value),console.log("dbs checked before sending to db is "+Q),console.log("longit before sending to db"+ot),console.log("latit before sending to db"+lt),""!==q.current.value&&null!==q.current.value){e.next=17;break}console.log(i),e.next=25;break;case 17:if(_.current.value===R.current.value){e.next=19;break}return e.abrupt("return",Ee("Passwords does not match"));case 19:d=[],et(!0),Ee(""),q.current.value!==U.email&&d.push(Y(q.current.value)),_.current.value&&d.push(H(_.current.value)),Promise.all(d).then((function(){})).catch((function(e){Ee(e.message),console.log(Le)})).finally((function(){et(!1)}));case 25:Oe.a.patch("https://letmeknow.uk/api/accounts/"+Me+"/",{first_name:"".concat(i.firstName),last_name:"".concat(i.lastName),email:"".concat(c),date_of_birth:"".concat(r),phone_number:"".concat(i.phoneNumber),post_code:"".concat(i.postcode),address_line_1:"".concat(a),address_line_2:"".concat(n),city:"".concat(s),county:"".concat(o),dbs:Q,latitude:"".concat(void 0===lt?Ot:lt),longitude:"".concat(void 0===ot?bt:ot),is_available:vt}).then((function(e){console.log(e),P("Data has been updated successfully"),console.log("dbs when on databse is"+Q),console.log(N)})).catch((function(e){console.log(e)})),console.log(N);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pt;return Object(n.jsx)(o.a.Fragment,{children:Object(n.jsxs)("div",{style:{width:"80vw"},children:[Object(n.jsx)("h4",{align:"center",children:" My Profile"}),!Le&&N&&Object(n.jsx)(ae.a,{severity:"success",children:Object(n.jsx)(ne.a,{children:N})}),Le&&Object(n.jsx)(ae.a,{severity:"error",children:Object(n.jsx)(ne.a,{children:Le})}),Object(n.jsxs)(B.a,{container:!0,"flex-start":"left",children:[Object(n.jsx)("p",{style:{paddingLeft:8},children:"Please enter your details here"})," "]}),Object(n.jsxs)("form",{onSubmit:function(e){return Nt.apply(this,arguments)},children:[Object(n.jsxs)(B.a,{container:!0,spacing:3,children:[Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{id:"firstName",type:"text",name:"firstName",label:"First name",variant:"outlined",onChange:Tt,value:c||"",style:Ce.textFld,autoComplete:"given-name"})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{id:"lastName",name:"lastName",type:"text",label:"Last name",variant:"outlined",onChange:Tt,value:b||"",style:Ce.textFld,autoComplete:"family-name"})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{id:"dateOfBirth",name:"dateOfBirth",type:"date",InputLabelProps:{shrink:!0},inputProps:{max:(Pt=new Date,Pt.getFullYear()+"-"+(1+Pt.getMonth()).toString().padStart(2,"0")+"-"+Pt.getDate().toString().padStart(2,"0"))},label:"Date Of Birth",onChange:Tt,value:h||"",variant:"outlined",style:Ce.textFld})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{required:!0,id:"phoneNumber",name:"phoneNumber",label:"Phone Number",onChange:Tt,value:p||"",variant:"outlined",inputProps:{maxLength:12},style:Ce.textFld})}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[Object(n.jsxs)(ve.a,{children:[Object(n.jsx)(K.a,{required:!0,id:"postcode",name:"postcode",label:"Post code",variant:"outlined",onChange:Tt,inputRef:A,value:g||"",style:Ce.textFld,autoComplete:" postal-code"}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(v.a,{variant:"outlined",type:"submit",onClick:function(e){e.preventDefault(),Oe.a.get("https://api.getAddress.io/find/".concat(A.current.value,"?api-key=").concat("MiC2gWzCHEqmtrKigQQjcg29846")).then((function(e){var t=e.data;dt(t.latitude),it(t.longitude),console.log(t),console.log("lat is"+lt),console.log("long is"+ot),Pe(t.addresses)," "===Ne?Je("No addresses found at the given post code"):Re(!0),console.log(Ne)})).catch((function(e){St({isOpen:!0,message:"No addresses found at the given post code",type:"error"}),console.log(Qe)}))},children:"Find Address"})})]}),"  "]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[Ie&&Object(n.jsxs)(ge.a,{variant:"outlined",style:{width:"100%",height:40,paddingLeft:8},children:[Object(n.jsx)(fe.a,{htmlFor:"outlined-age-native-simple",children:"Select Addresses"}),Object(n.jsxs)(xe.a,{native:!0,id:"demo-simple-select-outlined",labelId:"demo-simple-select-outlined-label",style:Ce.textFld,variant:"outlined",label:"Select Addresses",onChange:function(e){console.log(e);var t=Object(he.a)(e.target.selectedOptions).map((function(e){return e.value}));if(""!=={valueList:t}){var a=t.toString().split(",");console.log(a),oe(a[0]),le(a[1]),Se(a[5]),be(a[6])}},children:[Object(n.jsx)("option",{value:"",selected:!0,children:" "}),Ne.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))]})]}),Qe&&Object(n.jsx)(ke,{notify:Ct,setNotify:St,verticalPosTop:!1})]}),Object(n.jsxs)(B.a,{item:!0,xs:12,children:[!Ie&&Object(n.jsx)(K.a,{required:!0,id:"address1",name:"address1",label:"Address line 1",onChange:Tt,inputRef:F,value:f||"",variant:"outlined",style:Ce.textFld,autoComplete:"address-line1"}),Ie&&Object(n.jsx)(K.a,{required:!0,id:"address1",name:"address1",label:"Address line 1",value:se||"",variant:"outlined",style:Ce.textFld,autoComplete:"address-line1"})]}),Object(n.jsxs)(B.a,{item:!0,xs:12,children:[!Ie&&Object(n.jsx)(K.a,{id:"address2",name:"address2",label:"Address line 2",onChange:Tt,inputRef:L,value:x||"",variant:"outlined",style:Ce.textFld,autoComplete:"address-line2"}),Ie&&Object(n.jsx)(K.a,{id:"address2",name:"address2",label:"Address line 2",value:ce||"",variant:"outlined",style:Ce.textFld,autoComplete:"address-line2"})]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[!Ie&&Object(n.jsx)(K.a,{required:!0,id:"city",name:"city",label:"City",onChange:Tt,inputRef:E,value:y||"",variant:"outlined",style:Ce.textFld,autoComplete:"city"}),Ie&&Object(n.jsx)(K.a,{required:!0,id:"city",name:"city",label:"City",value:we||"",variant:"outlined",style:Ce.textFld,autoComplete:"city"})]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[!Ie&&Object(n.jsx)(K.a,{id:"county",name:"county",label:"County",onChange:Tt,inputRef:W,value:w||"",variant:"outlined",style:Ce.textFld,autoComplete:"county"}),Ie&&Object(n.jsx)(K.a,{id:"county",name:"county",label:"County",value:je||"",variant:"outlined",style:Ce.textFld,autoComplete:"county"})]}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{id:"email",name:"email",type:"email",label:"Email Address",inputRef:q||"",onChange:Tt,value:k||"",variant:"outlined",style:Ce.textFld})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{id:"password",name:"password",type:"password",label:"Password",inputRef:_,variant:"outlined",style:Ce.textFld})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{id:"passwordConfirm",name:"city",type:"password",label:"Confirm Password",inputRef:R,variant:"outlined",style:Ce.textFld})}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[!0===Ve&&!0===Q&&Object(n.jsx)(m.a,{control:Object(n.jsx)(te.a,{color:"secondary",style:{marginLeft:"5px"},name:"DBSChecked",value:Q,checked:"checked",onChange:Dt}),label:"I have a valid DBS certificate"}),!0===Ve&&!1===Q&&Object(n.jsx)(m.a,{control:Object(n.jsx)(te.a,{color:"secondary",style:{marginLeft:"5px"},name:"DBSChecked",value:Q,onChange:Dt}),label:"I have a valid DBS certificate"})]}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:!0===Ve&&Object(n.jsx)(m.a,{control:Object(n.jsx)(O.a,{checked:vt,onChange:function(e){yt(e.target.checked)},color:"primary","aria-label":"availability switch"}),label:vt?"Available":"Unavailable"})})]}),Object(n.jsx)(B.a,{container:!0,justify:"center",spacing:3,direction:"row",children:Object(n.jsxs)(ve.a,{className:"w-100 text-center mt-2",children:[Object(n.jsx)(B.a,{item:!0,xs:12,children:Object(n.jsx)(v.a,{disabled:$e,variant:"contained",style:Ce.button,className:"btn btn-primary w-100",type:"submit",children:"Update"})}),Object(n.jsx)(B.a,{item:!0,xs:12,children:Object(n.jsx)(v.a,{variant:"contained",style:Ce.button,className:"btn btn-primary w-100",component:D.b,to:"/helpwhoneeds/",children:"Cancel"})})]})})]})]})})}function Te(){return Object(n.jsxs)(x.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(D.b,{color:"inherit",to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var De=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ne(){var e=De(),t=Object(s.useRef)(),a=I().resetPassword,o=Object(s.useState)(""),i=Object(u.a)(o,2),r=i[0],c=i[1],j=Object(s.useState)(""),b=Object(u.a)(j,2),h=b[0],p=b[1],m=Object(s.useState)(!1),O=Object(u.a)(m,2),g=O[0],f=O[1],y=Object(T.h)().user;function w(){return(w=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,p(""),c(""),f(!0),e.next=7,a(t.current.value);case 7:p("Check your inbox for password reset instructions"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),c("Failed to reset password");case 13:f(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return Object(n.jsxs)(re.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(ee.a,{}),Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)($.a,{className:e.avatar,children:Object(n.jsx)(ie.a,{})}),Object(n.jsx)(x.a,{component:"h1",variant:"h5",children:" Forgot Password "}),r&&Object(n.jsx)(ae.a,{severity:"error",children:Object(n.jsxs)(ne.a,{children:["Error: ",r]})}),h&&Object(n.jsx)(ae.a,{severity:"success",children:Object(n.jsx)(ne.a,{children:h})}),Object(n.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(n.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"email",inputRef:t,id:"email",label:"Email Address"}),Object(n.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",disabled:g,color:"primary",children:"Reset Password"})]}),Object(n.jsx)(B.a,{container:!0,children:Object(n.jsx)(B.a,{item:!0,xs:!0,children:Object(n.jsxs)("div",{className:"w-100 text-center mt-2",children:["Go to ",Object(n.jsx)(D.b,{to:"/login/".concat(y),variant:"body2",children:"Sign In"})]})})}),Object(n.jsx)(B.a,{container:!0,children:Object(n.jsx)(B.a,{item:!0,xs:!0,children:Object(n.jsxs)("div",{className:"w-100 text-center mt-3",children:["New User ?",Object(n.jsx)(D.b,{to:"/signup/".concat(y),variant:"body2",children:"Sign Up "})]})})})]}),"  ",Object(n.jsx)(se.a,{mt:8,children:Object(n.jsx)(Te,{})})]})}var Pe={textFld:{width:"85%",height:40,paddingLeft:8},button:{border:"4px",fontWeight:"bold",marginLeft:10,marginTop:"10px"}};function qe(e){var t=Object(s.useState)({initialInputState:{firstName:"",lastName:"",dateOfBirth:"",phoneNumber:"",postcode:"",address1:"",address2:"",city:"",county:""}}),a=Object(u.a)(t,2),i=a[0],r=a[1],c=i.firstName,b=i.lastName,h=i.dateOfBirth,p=i.phoneNumber,O=i.postcode,g=i.address1,f=i.address2,x=i.city,y=i.county,w=Object(s.useState)(""),k=Object(u.a)(w,2),C=k[0],S=k[1],D=Object(s.useRef)(),N=Object(s.useRef)(),P=Object(s.useRef)(),q=Object(s.useRef)(),A=Object(s.useRef)(),R=Object(s.useState)(""),_=Object(u.a)(R,2),F=_[0],L=_[1],E=Object(s.useState)(""),W=Object(u.a)(E,2),M=W[0],U=W[1],H=Object(T.h)().user,Y=I().currentUser,V=Y.uid,z=Y.email,G=Object(s.useState)(!1),Q=Object(u.a)(G,2),J=Q[0],X=Q[1],Z=Object(s.useState)(""),$=Object(u.a)(Z,2),ee=$[0],se=$[1],oe=Object(s.useState)(""),ie=Object(u.a)(oe,2),re=ie[0],ce=ie[1],le=Object(s.useState)(""),de=Object(u.a)(le,2),ue=de[0],je=de[1],be=Object(s.useState)(""),me=Object(u.a)(be,2),ye=me[0],we=me[1],Ce=Object(s.useState)(),Se=Object(u.a)(Ce,2),Te=Se[0],De=Se[1],Ne=Object(s.useState)(),qe=Object(u.a)(Ne,2),Ae=qe[0],Ie=qe[1],Re=Object(s.useState)(!1),_e=Object(u.a)(Re,2),Fe=_e[0],Le=_e[1],Ee=o.a.useState(!1),We=Object(u.a)(Ee,2),Be=(We[0],We[1],Object(s.useState)({isOpen:!1,message:" ",type:" "})),Me=Object(u.a)(Be,2),Ue=Me[0],He=Me[1],Ye=function(e){r(Object(j.a)(Object(j.a)({},i),{},Object(pe.a)({},e.target.name,e.target.value)))};function Ve(){return(Ve=Object(d.a)(l.a.mark((function e(t){var a,n,s,o,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a="volunteer"===H,console.log(a+" "+y+" "+V+" "+J),n=""===ee?N.current.value:ee,s=""===re?P.current.value:re,o=""===M?q.current.value:M,r=""===F?A.current.value:F,console.log("dob before"+h),c=void 0===h?"1900-01-01":h,console.log("dob after"+c),console.log(n+""+s+" "+o+" "+r),console.log("longit before sending to db"+Te),console.log("latit before sending to db"+Ae),Oe.a.post("https://letmeknow.uk/api/accounts/",{first_name:"".concat(i.firstName),last_name:"".concat(i.lastName),uid:"".concat(V),email:"".concat(z),date_of_birth:"".concat(c),phone_number:"".concat(i.phoneNumber),post_code:"".concat(i.postcode),address_line_1:"".concat(n),address_line_2:"".concat(s),city:"".concat(o),county:"".concat(r),dbs:"".concat(J),is_volunteer:"".concat(a),latitude:Ae,longitude:Te}).then((function(e){console.log(e),S("Data has been saved successfully")})).catch((function(e){console.log(e)}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ze;return Object(n.jsxs)(o.a.Fragment,{children:[Object(n.jsx)("h2",{align:"center",children:" Registration form"}),C&&Object(n.jsx)(ae.a,{severity:"success",children:Object(n.jsx)(ne.a,{children:C})}),Object(n.jsxs)(B.a,{container:!0,"flex-start":"left",children:[Object(n.jsx)("p",{style:{paddingLeft:8},children:"Please enter your details here"})," "]}),Object(n.jsxs)("form",{onSubmit:function(e){return Ve.apply(this,arguments)},children:[Object(n.jsxs)(B.a,{container:!0,spacing:3,children:[Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{required:!0,id:"firstName",type:"text",name:"firstName",label:"First name",variant:"outlined",onChange:Ye,value:c||"",inputProps:{maxLength:20},style:Pe.textFld,autoComplete:"given-name"})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{required:!0,id:"lastName",name:"lastName",type:"text",label:"Last name",onChange:Ye,value:b||"",inputProps:{maxLength:20},variant:"outlined",style:Pe.textFld,autoComplete:"family-name"})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{id:"dateOfBirth",name:"dateOfBirth",type:"date",InputLabelProps:{shrink:!0},inputProps:{max:(ze=new Date,ze.getFullYear()+"-"+(1+ze.getMonth()).toString().padStart(2,"0")+"-"+ze.getDate().toString().padStart(2,"0"))},label:"Date Of Birth",onChange:Ye,value:h||"",variant:"outlined",style:Pe.textFld})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{id:"phoneNumber",name:"phoneNumber",label:"Phone Number",type:"number",onChange:Ye,value:p||"",variant:"outlined",inputProps:{maxLength:11},style:Pe.textFld})}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[Object(n.jsxs)(ve.a,{children:[Object(n.jsx)(K.a,{required:!0,id:"postcode",name:"postcode",label:"Post code",variant:"outlined",onChange:Ye,inputRef:D,value:O||"",style:Pe.textFld,autoComplete:" postal-code"}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(v.a,{variant:"outlined",type:"submit",onClick:function(e){e.preventDefault();Oe.a.get("https://api.getAddress.io/find/".concat(D.current.value,"?api-key=").concat("MiC2gWzCHEqmtrKigQQjcg29846")).then((function(e){var t=e.data;console.log(t.latitude),Ie(t.latitude),De(t.longitude),console.log("lat is"+Ae),console.log("long is"+Te),je(t.addresses)," "===ue?we("No addresses found at the given post code"):Le(!0),console.log(ue)})).catch((function(e){we("No addresses found at the given post code"),He({isOpen:!0,message:"No addresses found at the given post code",type:"error"}),console.log(e)}))},children:"Find Address"})})]}),"  "]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[Fe&&Object(n.jsxs)(ge.a,{variant:"outlined",style:{width:"100%",height:40,paddingLeft:8},children:[Object(n.jsx)(fe.a,{htmlFor:"outlined-age-native-simple",children:"Select Addresses"}),Object(n.jsxs)(xe.a,{native:!0,id:"demo-simple-select-outlined",labelId:"demo-simple-select-outlined-label",style:Pe.textFld,variant:"outlined",label:"Select Addresses",onChange:function(e){var t=Object(he.a)(e.target.selectedOptions).map((function(e){return e.value}));if(""!=={valueList:t}){var a=t.toString().split(",");console.log(a),se(a[0]),ce(a[1]),U(a[5]),L(a[6])}},children:[Object(n.jsx)("option",{value:"",selected:!0,children:" "}),ue.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))]})]}),ye&&Object(n.jsx)(ke,{notify:Ue,setNotify:He,verticalPosTop:!1})]}),Object(n.jsxs)(B.a,{item:!0,xs:12,children:[!Fe&&Object(n.jsx)(K.a,{required:!0,id:"address1",name:"address1",label:"Address line 1",onChange:Ye,inputRef:N,value:g||"",variant:"outlined",style:Pe.textFld,autoComplete:"address-line1"}),Fe&&Object(n.jsx)(K.a,{required:!0,id:"address1",name:"address1",label:"Address line 1",value:ee||"",variant:"outlined",style:Pe.textFld,autoComplete:"address-line1"})]}),Object(n.jsxs)(B.a,{item:!0,xs:12,children:[!Fe&&Object(n.jsx)(K.a,{id:"address2",name:"address2",label:"Address line 2",onChange:Ye,inputRef:P,value:f||"",variant:"outlined",style:Pe.textFld,autoComplete:"address-line2"}),Fe&&Object(n.jsx)(K.a,{id:"address2",name:"address2",label:"Address line 2",value:re||"",variant:"outlined",style:Pe.textFld,autoComplete:"address-line2"})]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[!Fe&&Object(n.jsx)(K.a,{required:!0,id:"city",name:"city",label:"City",onChange:Ye,inputRef:q,value:x||"",variant:"outlined",style:Pe.textFld,autoComplete:"city"}),Fe&&Object(n.jsx)(K.a,{required:!0,id:"city",name:"city",label:"City",value:M||"",variant:"outlined",style:Pe.textFld,autoComplete:"city"})]}),Object(n.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[!Fe&&Object(n.jsx)(K.a,{id:"county",name:"county",label:"County",onChange:Ye,inputRef:A,value:y||"",variant:"outlined",style:Pe.textFld,autoComplete:"county"}),Fe&&Object(n.jsx)(K.a,{id:"county",name:"county",label:"County",value:F||"",variant:"outlined",style:Pe.textFld,autoComplete:"county"})]}),Object(n.jsx)(B.a,{item:!0,xs:12,children:"volunteer"==="".concat(H)&&Object(n.jsx)(m.a,{control:Object(n.jsx)(te.a,{color:"secondary",style:{marginLeft:"5px"},name:"DBSchecked",value:J,onChange:function(e){X(e.target.checked),console.log(J)}}),label:"I have a valid DBS certificate"})})]}),Object(n.jsx)(B.a,{container:!0,justify:"center",spacing:3,direction:"row",children:Object(n.jsx)(B.a,{item:!0,xs:12,align:"center",children:Object(n.jsx)(v.a,{variant:"contained",className:"btn btn-primary w-100",type:"submit",children:"Submit"})})})]})]})}var Ae=a(735),Ie=a(736),Re=a(737),_e=a(738),Fe=a(712),Le=a(19),Ee=function(e){return{textFld:{width:"85%",height:40,paddingLeft:8},button:{border:"4px",color:"default",fontWeight:"bold",marginLeft:10,marginTop:"10px"},form:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"}}},We=function(e){var t=e.open,a=e.handleClose,s=e.title,o=e.data,i=Object(Le.a)(),r=Object(Fe.a)(i.breakpoints.down("sm"));return console.log(o),Object(n.jsx)("div",{children:Object(n.jsxs)(Ae.a,{open:t,onClose:a,fullScreen:r,"aria-labelledby":"responsive-dialog-title",children:[Object(n.jsx)(Ie.a,{children:s}),Object(n.jsx)(Re.a,{children:Object(n.jsx)("form",{className:Ee.form,noValidate:!0,children:o&&Object(n.jsxs)(B.a,{container:!0,spacing:3,children:[o.firstName," ",o.lastName,Object(n.jsx)(B.a,{item:!0,xs:12,sm:12,children:Object(n.jsx)(K.a,{id:"taskType",type:"string",label:"Task",value:o.taskType,variant:"outlined",style:Ee.textFld,autoComplete:"family-name"})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:12,children:Object(n.jsx)(K.a,{id:"taskDetails",type:"string",label:"Task Summary",value:o.taskDetails,variant:"outlined",multiline:!0,rows:6,style:Ee.textFld,autoComplete:"family-name"})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6})]})})}),Object(n.jsx)(_e.a,{children:Object(n.jsx)(v.a,{autoFocus:!0,onClick:a,color:"primary",children:"Close"})})]})})},Be=Object(b.a)((function(e){return{dailog:{padding:e.spacing(2),position:"absolute",top:e.spacing(15)},dailogContent:{textAlign:"center"},dailogAction:{justifyContent:"center"}}})),Me=function e(t){var a=Be(),s=t.confirmDialog,o=t.setConfirmDialog;return Object(n.jsxs)(Ae.a,{open:s.isOpen,className:a.dailog,children:[Object(n.jsx)(Ie.a,{children:Object(n.jsx)(x.a,{variant:"h6",children:s.title})}),Object(n.jsx)(Re.a,{className:a.dailogContent,children:Object(n.jsx)(x.a,{variant:"subtitle2",children:s.subTitle})}),Object(n.jsxs)(_e.a,{className:a.dailogAction,children:[Object(n.jsx)(v.a,{variant:"contained",size:"small",style:{minWidth:"90px"},onClick:s.onConfirm,children:"OK"}),Object(n.jsx)(v.a,{variant:"contained",size:"small",style:{minWidth:"90px"},onClick:function(){return o(Object(j.a)(Object(j.a)({},e),{},{isOpen:!1}))},children:"Cancel"})]})]})},Ue=a(131),He=a.n(Ue),Ye=a(118),Ve=a(739),ze=a(68),Ge=a.n(ze),Ke="DD MMM YYYY",Qe={filterType:"multiselect",selectableRows:"none",rowsPerPage:5,rowsPerPageOptions:[5,10,15,20],print:!1,download:!1,sortOrder:{name:"start",direction:"asc"}};function Je(e){var t=e.taskListData,a=e.isMyTask,s=e.handleAccept,o=e.handleView,i=e.handleReject,r=e.handleComplete,c=[{name:"id",label:"ID",options:{display:!1,sort:!1,filter:!1,viewColumns:!1}},{name:"volId",label:"volunteer ID",options:{display:!1,sort:!1,filter:!1,viewColumns:!1}},{name:"status",label:"State",options:{display:!1,filter:!1,sort:!1,viewColumns:!1,width:"10%"}},{name:"firstName",label:"First name",options:{display:!1,filter:!0,sort:!0}},{name:"lastName",label:"Last name",options:{display:!1,filter:!0,sort:!0}},{name:"firstName",label:"Full Name",options:{filter:!1,sort:!0,customBodyRender:function(e,t,a){return Object(n.jsxs)("div",{children:[t.rowData[3]," ",t.rowData[4]]})}}},{name:"taskType",label:"Task",options:{filter:!0,sort:!0}},{name:"start",label:"Start Time",options:{filter:!1,sort:!0,width:"10%",customBodyRender:function(e){return Ge()(e).format("lll")}}},{name:"end",label:"End Time",options:{filter:!1,sort:!0,width:"10%",customBodyRender:function(e){return Ge()(e).format("lll")}}},{name:"start",label:"Start Date",options:{filter:!0,sort:!0,display:!1,viewColumns:!1,customBodyRender:function(e){return Ge()(new Date(e)).format(Ke)}}},{name:"end",label:"End Date",options:{filter:!0,sort:!0,display:!1,viewColumns:!1,customBodyRender:function(e){return Ge()(new Date(e)).format(Ke)}}},{name:"distance",label:"Dist(mi)",options:{filter:!0,sort:!0,width:"5%"}},{name:"postCode",label:"Postcode",options:{filter:!0,display:!1,viewColumns:!0,sort:!0,width:"5%"}},{name:"id",label:"Action",options:{sort:!1,filter:!1,viewColumns:!1,display:!0===a,customBodyRender:function(e,t){var a=t.rowData[2];return Object(n.jsx)(v.a,{variant:"contained",color:"secondary",size:"small",disabled:"DN"===a||"CL"===a,style:{marginLeft:2,minWidth:"70px"},className:"button",value:e,onClick:function(){i(e)},children:"CL"!==a?"Reject":"Cancelled"})}}},{name:"id",label:"Confirm",options:{sort:!1,filter:!1,viewColumns:!1,display:!0===a,customBodyRender:function(e,t){var a=t.rowData[2];return Object(n.jsx)(v.a,{variant:"contained",color:"default",size:"small",disabled:"DN"===a||"CL"===a,style:{marginLeft:2,minWidth:"90px"},className:"button",value:e,onClick:function(){r(e)},children:"DN"!==a?"COMPLETE":"DONE"})}}},{name:"id",label:"Action",options:{sort:!1,filter:!1,viewColumns:!1,display:!a,customBodyRender:function(e,t){var a=t.rowData[2];return Object(n.jsx)(v.a,{variant:"contained",color:"primary",size:"small",disabled:"OP"!==a,style:{marginLeft:2,backgroundColor:"OP"!==a?"lightgrey":"green"},className:"button",value:e,onClick:function(){console.log("value"),console.log(e),s(e)},children:"Accept"})}}},{name:"id",label:" Task Detail",options:{filter:!1,sort:!1,viewColumns:!1,customBodyRender:function(e,t,a){return Object(n.jsx)(v.a,{variant:"contained",color:"primary",size:"small",style:{marginLeft:2,minWidth:"70px"},value:e,onClick:function(t){o(t,e)},children:"View"})}}}];return Object(n.jsx)(Ve.a,{theme:Object(Ye.a)({overrides:{MuiDataTable:{root:{width:"min-content"},responsiveScroll:{maxHeight:"none"}},MUIDataTableToolbar:{root:{background:"#AAF"}},MUIDataTableBodyCell:{root:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",position:"relative",backgroundColor:"#FFF"}}}}),children:Object(n.jsx)(He.a,{title:!1===a?"New Tasks":"My Pending Tasks",data:t,columns:c,options:Qe})})}var Xe=a(742),Ze=a(740),$e=Object(b.a)((function(e){return{h5:{color:"#4C4B51",textAlign:"center"}}}));function et(){var e=I().currentUser.uid;console.log(e);var t=Object(s.useState)(null),a=Object(u.a)(t,2),i=a[0],r=a[1],c=Object(s.useState)([]),l=Object(u.a)(c,2),d=l[0],b=l[1],h=Object(s.useState)(!1),p=Object(u.a)(h,2),m=p[0],O=p[1],g=Object(s.useState)(!0),f=Object(u.a)(g,2),x=f[0],y=f[1];Object(s.useEffect)((function(){Oe.a.get("https://letmeknow.uk/api/accounts/get_user_by_id/",{params:{uid:e}}).then((function(e){var t=e.data;console.log("userdata"),console.log(t),console.log(t[0]);var a={id:"".concat(t[0].id)};console.log("userId by uuid"),console.log(a.id),r(a.id)})).catch((function(e){console.log("error"),console.log(e.request),console.log(e.config),console.log(e.message)})),console.log("set UserId"),console.log(i)}),[e,i]),Object(s.useEffect)((function(){Oe.a.get("https://letmeknow.uk/api/tasks/get_vol_task",{params:{volId:i}}).then((function(e){var t=e.data;console.log(t);var a=t.map((function(e){return{id:"".concat(e.id),lastName:"".concat(e.requestee_details.last_name),firstName:"".concat(e.requestee_details.first_name),taskType:"".concat(e.task_type_details.task_type_name),taskDetails:"".concat(e.description),start:"".concat(e.start_time),end:"".concat(e.end_time),distance:"".concat(e.distance),volId:"".concat(e.volunteer),status:"".concat(e.status),postCode:"".concat(e.requestee_details.post_code)}}));b(a),O(!0),console.log("tasks"),console.log(a)})).catch((function(e){console.log("error"),console.log(e.request),console.log(e.config),console.log(e.message)}))}),[i]),console.log("database json out "),console.log(d);var w=$e(),k=d?d.filter((function(e){return"AS"===e.status})):null,C=d.filter((function(e){return"OP"===e.status})),S=Object(s.useState)(!1),T=Object(u.a)(S,2),D=T[0],N=T[1],P=Object(s.useState)(!1),q=Object(u.a)(P,2),A=q[0],R=q[1],_=o.a.useState(!1),F=Object(u.a)(_,2),L=F[0],E=F[1],W=o.a.useState(null),M=Object(u.a)(W,2),U=M[0],H=M[1],Y=Object(s.useState)({isOpen:!1,message:" ",type:" "}),V=Object(u.a)(Y,2),z=V[0],G=V[1],K=Object(s.useState)({isOpen:!1,title:"",subTitle:""}),Q=Object(u.a)(K,2),J=Q[0],X=Q[1],Z=function(e,t){var a=d.find((function(e){return e.id===t}));console.log(a),null!=a&&function(e,t){E(!0),H(t)}(0,a)},$=function(e){X({isOpen:!0,title:"Are you sure to cancel your assigned Task?",subTitle:"Once rejected you will no longer be able to see the task.To retake the task you need to go to Search Task and Accept it again.",onConfirm:function(){X(Object(j.a)(Object(j.a)({},J),{},{isOpen:!1})),y(!1),Oe.a.get("https://letmeknow.uk/api/tasks/"+e+"/").then((function(t){var a=t.data;console.log(a);var n=t.data,s={status:"".concat(n.status)};console.log("slected tasks"),console.log(s),"AS"===s.status?Oe.a.patch("https://letmeknow.uk/api/tasks/"+e+"/",{status:"OP",volId:null,isUpdatedByVol:!0}).then((function(t){console.log(t);var a=d.map((function(t){return t.id===e?Object(j.a)(Object(j.a)({},t),{},{volId:null,status:"OP"}):t}));b(a),console.log("myTask"),console.log(k),console.log("assignTasks"),console.log(C),console.log(d),y(!0),G({isOpen:!0,message:"Task is unssigned from you. Email notification will be sent shortly.",type:"warning"})})).catch((function(e){console.log(e)})):console.log("alert task already returned")})).catch((function(e){console.log("error"),console.log(e.request),console.log(e.config),console.log(e.message)}))}})},ee=function(e){console.log("Accepted userID"),console.log(i),X({isOpen:!0,title:"Do you agree to accept this task?",subTitle:"Once accepted it will be assigned to you.To return the task you need to go to your task list and reject it.",onConfirm:function(){X(Object(j.a)(Object(j.a)({},J),{},{isOpen:!1})),y(!1),Oe.a.get("https://letmeknow.uk/api/tasks/"+e+"/").then((function(t){var a=t.data;console.log(a);var n=t.data,s={status:"".concat(n.status)};console.log("slected tasks"),console.log(s),"OP"===s.status?Oe.a.patch("https://letmeknow.uk/api/tasks/"+e+"/",{status:"AS",volId:i,isUpdatedByVol:!0}).then((function(t){console.log(t);var a=d.map((function(t){return t.id===e?Object(j.a)(Object(j.a)({},t),{},{volId:i,status:"AS"}):t}));b(a),console.log("assignTasks"),console.log(C),console.log("myTask"),console.log(k),console.log(d),y(!0),G({isOpen:!0,message:"Task is successfully assigned to you.Email notification will be sent shortly.",type:"success"})})).catch((function(e){console.log(e)})):(y(!0),G({isOpen:!0,message:"Task has been already accepted by another volunteer. Please refresh the page to get the latest new tasks",type:"error"}),console.log("alert task already assigned"))})).catch((function(e){console.log("error"),console.log(e.request),console.log(e.config),console.log(e.message)}))}})},te=function(e){X({isOpen:!0,title:"Have you completed this task?",subTitle:"Once completed it will be marked as done will be removed from your list.",onConfirm:function(){X(Object(j.a)(Object(j.a)({},J),{},{isOpen:!1})),y(!1),Oe.a.get("https://letmeknow.uk/api/tasks/"+e+"/").then((function(t){var a=t.data;console.log(a);var n=t.data,s={status:"".concat(n.status)};console.log("slected tasks"),console.log(s),"AS"===s.status?Oe.a.patch("https://letmeknow.uk/api/tasks/"+e+"/",{status:"DN",isUpdatedByVol:!0}).then((function(t){console.log(t);var a=d.map((function(t){return t.id===e?Object(j.a)(Object(j.a)({},t),{},{status:"DN"}):t}));b(a),console.log("assignTasks"),console.log(C),console.log("myTask"),console.log(k),console.log(d),y(!0),G({isOpen:!0,message:"Task is successfully marked as completed.Email notification will be sent shortly.",type:"success"})})).catch((function(e){console.log(e)})):console.log("alert task already marked completed")})).catch((function(e){console.log("error"),console.log(e.request),console.log(e.config),console.log(e.message)}))}})};return Object(n.jsx)(o.a.Fragment,{children:m?Object(n.jsxs)("div",{style:{height:"100%"},children:[!x&&Object(n.jsxs)("div",{children:[" ",Object(n.jsx)(Ze.a,{}),Object(n.jsx)(Ze.a,{color:"secondary"})]}),Object(n.jsxs)(B.a,{id:"tasks",container:!0,spacing:2,direction:"row",justify:"center",children:[!D&&Object(n.jsxs)(B.a,{className:"my-tasks",item:!0,xs:12,sm:6,align:"right",children:[Object(n.jsxs)(Xe.a,{smUp:!0,children:[Object(n.jsx)(v.a,{variant:"contained",color:"default",size:"small",onClick:function(){N(!0),R(!1)},children:"Search New Tasks"})," "]}),Object(n.jsx)("h4",{className:w.h5,children:"My Assigned Tasks"}),Object(n.jsx)(Je,{taskListData:k,isMyTask:!0,handleAccept:ee,handleReject:$,handleView:Z,handleComplete:te})]}),!A&&Object(n.jsxs)(B.a,{className:"new-tasks",item:!0,xs:12,sm:6,align:"right",children:[Object(n.jsxs)(Xe.a,{smUp:!0,children:[" ",Object(n.jsx)(v.a,{variant:"contained",color:"default",size:"small",onClick:function(){R(!0),N(!1)},children:"View My Tasks"})]}),Object(n.jsx)("h4",{className:w.h5,children:"Search New Tasks"}),Object(n.jsx)(Je,{taskListData:C,isMyTask:!1,handleAccept:ee,handleReject:$,handleView:Z,handleComplete:te})]})]}),Object(n.jsx)(We,{open:L,handleClose:function(){E(!1),H(null)},title:"Task Summary",data:U}),Object(n.jsx)(ke,{notify:z,setNotify:G,verticalPosTop:!0}),Object(n.jsx)(Me,{confirmDialog:J,setConfirmDialog:X})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)(Ze.a,{}),Object(n.jsx)(Ze.a,{color:"secondary"})]})})}var tt=a(408),at=a.n(tt),nt=a(410),st=a.n(nt),ot=a(412),it=a.n(ot),rt=a(409),ct=a.n(rt),lt=a(411),dt=a.n(lt),ut=a(413),jt=a.n(ut),bt=Object(b.a)({h1:{color:"#4C4B51"},largeButton:{border:5,color:"#FF8E53",padding:"15px",margin:"15px",height:100,width:110},largeIcon:{fontSize:60},label:{flexDirection:"column"},icon:{fontSize:"32px !important",marginBottom:5}});function ht(e){var t=e.handleClickOpen,a=bt();return Object(n.jsxs)("div",{className:"centered",children:[Object(n.jsx)("h1",{children:"I need help with..."}),Object(n.jsxs)(v.a,{classes:{root:a.largeButton,label:a.label},onClick:function(e){return t(e,"GRO")},children:[Object(n.jsx)(at.a,{className:a.largeIcon}),"Shopping"]}),Object(n.jsxs)(v.a,{classes:{root:a.largeButton,label:a.label},onClick:function(e){return t(e,"PHA")},children:[Object(n.jsx)(ct.a,{className:a.largeIcon}),"Pharmacy"]}),Object(n.jsxs)(v.a,{classes:{root:a.largeButton,label:a.label},onClick:function(e){return t(e,"DOG")},children:[Object(n.jsx)(st.a,{className:a.largeIcon}),"Dog Walk"]}),Object(n.jsxs)(v.a,{classes:{root:a.largeButton,label:a.label},onClick:function(e){return t(e,"HOS")},children:[Object(n.jsx)(dt.a,{className:a.largeIcon}),"Hospital"]}),Object(n.jsxs)(v.a,{classes:{root:a.largeButton,label:a.label},onClick:function(e){return t(e,"CHAT")},children:[Object(n.jsx)(it.a,{className:a.largeIcon}),"Chat"]}),Object(n.jsxs)(v.a,{classes:{root:a.largeButton,label:a.label},onClick:function(e){return t(e,"ANY")},children:[Object(n.jsx)(jt.a,{className:a.largeIcon}),"Other"]})]})}var pt=a(415),mt=Object(b.a)({p:{margin:"10px 2px 10px 2px"},root:{padding:"8px 0px 8px 0px"}});var Ot=function(e){var t=e.open,a=e.handleClose,o=e.taskType,i=e.defaultValues,r=e.updTaskId,c=e.updateTaskList,l=e.reqId;Object(s.useEffect)((function(){O(i)}),[i]);var d=o?o.id:null,u=o?o.task_type:null,j=o?o.min_duration:null,b=function(e){return e.getFullYear()+"-"+(1+e.getMonth()).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")},h=Object(pt.a)({defaultValues:i,mode:"all"}),p=h.register,m=h.handleSubmit,O=h.reset,g=h.errors,f=h.watch,y=h.setValue,w=h.clearErrors,k=function(){O(),a()},C=f(),S=mt(),T="Required field";return Object(n.jsx)("div",{children:Object(n.jsx)(Ae.a,{open:t,onClose:k,fullWidth:!0,maxWidth:"sm",children:Object(n.jsxs)("form",{onSubmit:m((function(e){var t=function(e,t,a){var n={};return n.task_type=d,n.description=e.taskDetails||"",n.dbs_required=e.dbsReq,n.start_time=t,n.end_time=a,console.log("Requestee ID: ",l),n.requestee=l>0?l:100,n.volunteer=null,console.log("item created: ",n),n}(e,new Date(e.startDate+"T"+e.startTime),new Date(e.endDate+"T"+e.endTime));console.log("Submitting item: ",t),r<0?Oe.a.post("https://letmeknow.uk/api/tasks/",t).then((function(e){console.log("POST RESPONSE: ",e),console.log("POST RESPONSE DATA: ",e.data);var t=201===e.status?e.data.id:-1;if(t>0){console.log("Adding new item to the list of tasks... New Task id=",t);var a=e.data;c(a,-1),console.log("onSubmit: newTaskId: ",t)}else console.log("Something was unsuccessful. Request status: ",e.status)})).catch((function(e){console.log(e.request),console.log(e.config)})):Oe.a.put("https://letmeknow.uk/api/tasks/"+r+"/",t).then((function(e){if(console.log("PUT RESPONSE: ",e),console.log("PUT RESPONSE DATA: ",e.data.id),200===e.status){var t=e.data;c(t,e.data.id),console.log("onSubmit: updated task with id: ",r)}else console.log("Something went wrong on task update.. Response status: ",e.status)})).catch((function(e){console.log(e.request),console.log(e.config)})),console.log("onSubmit: updTaskId: ",r),k()})),children:[Object(n.jsx)(Ie.a,{id:"dialog-add-task",children:{GRO:"Shopping",PHA:"Collect medicine",DOG:"Dog Walking",HOS:"Visit Hospital Appointment",CHAT:"Friendly Chat",ANY:"I need help with ..."}[u]}),Object(n.jsxs)(Re.a,{children:[Object(n.jsx)(K.a,{id:"taskDetails",name:"taskDetails",inputRef:p({required:["GRO","ANY"].includes(u)}),label:"Details",multiline:!0,rows:5,variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},error:g.taskDetails,helperText:g.taskDetails&&"Details are required for this task type"}),Object(n.jsxs)("p",{className:S.p,children:[Object(n.jsx)("br",{}),"Set dates when you need it: ",Object(n.jsx)("br",{}),Object(n.jsx)(x.a,{variant:"caption",children:"Providing wider time window will increase your chances to find a volunteer."})]}),Object(n.jsxs)(B.a,{id:"start-time",container:!0,spacing:3,children:[Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{inputRef:p({required:T}),id:"startDate",name:"startDate",label:"Starting from",type:"date",margin:"dense",fullWidth:!0,inputProps:{min:b(new Date)},onChange:function(e){e.target.value&&(!C.endDate||C.endDate&&C.endDate<e.target.value)&&y("endDate",e.target.value)},InputLabelProps:{shrink:!0},error:g.hasOwnProperty("startDate"),helperText:g.startDate&&g.startDate.message})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{inputRef:p({required:T}),type:"time",id:"startTime",name:"startTime",label:"Time",margin:"dense",fullWidth:!0,InputLabelProps:{shrink:!0},error:g.hasOwnProperty("startTime"),helperText:g.startTime&&g.startTime.message})})]}),Object(n.jsxs)(B.a,{id:"finish-time",container:!0,spacing:3,children:[Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{inputRef:p({required:T}),type:"date",margin:"dense",inputProps:{min:b(new Date)},id:"endDate",name:"endDate",label:"Ending at",fullWidth:!0,onChange:function(e){e.target.value&&C.startDate&&C.startDate>e.target.value&&y("startDate",e.target.value)},InputLabelProps:{shrink:!0},error:g.hasOwnProperty("endDate"),helperText:g.endDate&&g.endDate.message})}),Object(n.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(K.a,{inputRef:p({required:T,validate:function(){var e=new Date(C.startDate+"T"+C.startTime),t=new Date(C.endDate+"T"+C.endTime);if(C.startDate&&C.startTime&&C.endDate&&C.endTime)return e.setMinutes(e.getMinutes()+j)>t?"Not enough time to complete your task. Consider at least "+j+" minutes.":void 0;w("endTime")}}),type:"time",id:"endTime",name:"endTime",label:"Time",margin:"dense",fullWidth:!0,InputLabelProps:{shrink:!0},error:g.hasOwnProperty("endTime"),helperText:g.endTime&&g.endTime.message})})]})]}),Object(n.jsxs)(_e.a,{children:[Object(n.jsx)(v.a,{onClick:k,color:"primary",children:"Cancel"}),Object(n.jsx)(v.a,{type:"Submit",color:"primary",children:"Submit"})]})]})})})};function gt(e){var t=e.taskList,a=e.handleCopy,s=e.handleEdit,i=e.handleCancel,r=e.handleContact,c=e.handleSearchVol,l=[{name:"id",label:"ID",options:{display:!1,sort:!0,filter:!1,width:"5%"}},{name:"taskTypeName",label:"Task Type",options:{filter:!0,sort:!0,width:"10%"}},{name:"taskDetails",label:"Task Detail",options:{display:!0,filter:!1,sort:!1,width:"15%",customBodyRender:function(e){return e.slice(0,30)+(e.length>30?"...":"")}}},{name:"start",label:"Time Period",options:{filter:!1,sort:!0,width:"10%",customBodyRender:function(e,t){return Object(n.jsxs)("div",{children:[Ge()(e).format("lll"),Object(n.jsx)("br",{}),Ge()(t.rowData[4]).format("lll")]})}}},{name:"end",label:"End Time",options:{display:!1,filter:!1,sort:!1,viewColumns:!1}},{name:"volunteerId",label:"Volunteer",options:{filter:!1,sort:!0,width:"10%",customBodyRender:function(e,t){return Object(n.jsxs)("div",{children:["Open"!=t.rowData[6]||t.rowData[8]?null:t.rowData[9]?Object(n.jsx)("b",{children:"Requested"}):Object(n.jsx)(v.a,{variant:"contained",color:"primary",size:"small",className:"button",onClick:function(e){c(e,t.rowData[0])},children:"Search"}),"Open"==t.rowData[6]&&t.rowData[8]?t.rowData[9]:null,e?Object(n.jsx)(v.a,{variant:"contained",color:"default",size:"small",className:"button",onClick:function(e){return r(e,t.rowData[0])},children:"Contact"}):null]})}}},{name:"statusName",label:"State",options:{filter:!0,sort:!0,width:"10%",customBodyRender:function(e,t){return t.rowData[8]&&["Open","Assigned"].includes(e)?"Expired":e}}},{name:"id",label:"Actions",options:{sort:!1,filter:!1,width:"30%",customBodyRender:function(e,t){return Object(n.jsxs)("div",{children:[Object(n.jsx)(v.a,{variant:"contained",color:"primary",size:"small",className:"button",onClick:function(){console.log(t.rowData[0]),a(t.rowData[0])},children:"Copy"}),["Open","Expired"].includes(t.rowData[6])?Object(n.jsx)(v.a,{variant:"contained",color:"default",size:"small",className:"button",style:{marginLeft:10},onClick:function(){console.log(t.rowData[0]),s(t.rowData[0])},children:"Edit"}):null,["Open"].includes(t.rowData[6])&&!t.rowData[8]?Object(n.jsx)(v.a,{variant:"contained",color:"secondary",size:"small",className:"button",style:{marginLeft:10},onClick:function(){console.log(t.rowData[0]),i(t.rowData[0])},children:"Cancel"}):null]})}}},{name:"expired",label:"Expired",options:{display:!1,filter:!1,viewColumns:!1}},{name:"requestedVol",label:"Requested Vol",options:{display:!1,filter:!1,viewColumns:!1}}];return Object(n.jsx)(o.a.Fragment,{children:Object(n.jsx)(Ve.a,{theme:Object(Ye.a)({overrides:{MuiPaper:{root:{margin:"20px 0px 0px 0px"}},MuiTableCell:{root:{padding:"5px 5px 5px 15px"}},MUIDataTableToolbar:{root:{background:"#AAF"}},MUIDataTableHeadCell:{root:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",position:"relative"}},MUIDataTableBodyCell:{root:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",position:"relative"}}}}),children:Object(n.jsx)(He.a,{title:"All Tasks",data:t,columns:l,options:{selectableRows:!1,print:!1,download:!1,rowsPerPage:20,rowsPerPageOptions:[5,10,20],setRowProps:function(e){return"Assigned"===e[6]?{style:{background:"palegreen"}}:"Open"===e[6]?{style:{background:"lemonchiffon"}}:"Expired"===e[6]?{style:{background:"lightpink"}}:void 0},sortOrder:{name:"start",direction:"desc"}}})})})}var ft={selectableRows:"none",rowsPerPage:5,rowsPerPageOptions:[5,10,15,20],print:!1,download:!1,filter:!1,viewColumns:!1,sortOrder:{name:"distance",direction:"desc"}},xt=[{reqId:1,reqVolId:2,lastName:"Snow",firstName:"Jon",distance:1},{reqId:1,reqVolId:3,lastName:"Kate",firstName:"Kelly",distance:.8},{reqId:1,reqVolId:4,lastName:"Caroline",firstName:"Gardener",distance:.9}],vt=function(e){var t=e.open,a=e.handleClose,o=e.data,i=(e.requestVolunteer,Object(s.useState)(-1)),r=Object(u.a)(i,2),c=(r[0],r[1]),l=Object(Le.a)(),d=Object(Fe.a)(l.breakpoints.down("sm")),j=[{name:"reqId",label:"requestee ID",options:{display:!1,sort:!1,filter:!1,viewColumns:!1}},{name:"reqVolId",label:"volunteer ID",options:{display:!1,sort:!1,filter:!1,viewColumns:!1}},{name:"firstName",label:"First name",options:{display:!1,filter:!0,sort:!0}},{name:"lastName",label:"Last name",options:{display:!1,filter:!0,sort:!0}},{name:"firstName",label:"Full Name",options:{filter:!1,sort:!1,customBodyRender:function(e,t,a){return Object(n.jsxs)("div",{children:[t.rowData[2]," ",t.rowData[3]]})}}},{name:"distance",label:"Dist",options:{filter:!0,sort:!0}},{name:"reqVolId",label:"Request",options:{filter:!1,sort:!1,viewColumns:!1,customBodyRender:function(e,t,a){return Object(n.jsx)(v.a,{variant:"contained",color:"primary",size:"small",style:{marginLeft:2,minWidth:"70px"},value:e,onClick:function(t){console.log("selectedtask"+o.id),console.log("selected volunteer"+e),c(e)},children:"Request"})}}}];return console.log(o),Object(n.jsx)("div",{children:Object(n.jsxs)(Ae.a,{open:t,onClose:a,fullScreen:d,"aria-labelledby":"responsive-dialog-title",children:[Object(n.jsx)(Ie.a,{children:'"Search Volunteer"'}),Object(n.jsx)(Re.a,{children:o&&Object(n.jsxs)("div",{children:["For your selected task you can send request to your local volunteer available below:",Object(n.jsx)(Ve.a,{theme:Object(Ye.a)({overrides:{MuiDataTable:{root:{width:"min-content"},responsiveScroll:{maxHeight:"none"}},MUIDataTableToolbar:{root:{background:"#AAF"}},MUIDataTableBodyCell:{root:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",position:"relative",backgroundColor:"#FFF"}}}}),children:Object(n.jsx)(He.a,{title:"Request volunteer",data:xt,columns:j,options:ft})})]})}),Object(n.jsx)(_e.a,{children:Object(n.jsx)(v.a,{autoFocus:!0,onClick:a,color:"primary",children:"Close"})})]})})};var yt=function(e){var t=e.open,a=e.handleClose,s=e.volunteer;return Object(n.jsxs)(Ae.a,{onClose:a,open:t,children:[Object(n.jsx)(Ie.a,{children:"Volunteer Contact Details"}),Object(n.jsxs)(Re.a,{children:[console.log(s),"Name: ",Object(n.jsx)("b",{children:s.first_name+" "+s.last_name})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),"Email: ",Object(n.jsx)("b",{children:s.email})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),"Phone: ",Object(n.jsx)("b",{children:s.phone_number})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsx)(v.a,{onClick:a,children:"Close"})]})};var wt=function(){var e=I().currentUser.uid,t=Object(s.useState)(-1),a=Object(u.a)(t,2),i=a[0],r=a[1],c=Object(s.useState)([]),l=Object(u.a)(c,2),d=l[0],b=l[1],h=Object(s.useState)({}),p=Object(u.a)(h,2),m=p[0],O=p[1],g=function(e){var t={};return t.id=e.id,t.taskType=e.task_type,t.taskTypeName=e.task_type_details.task_type_name,t.taskDetails=e.description,t.start=e.start_time,t.end=e.end_time,t.expired=e.expired,t.dbsReq=e.dbs_required,t.status=e.status,t.statusName=e.status_name,t.requesteeId=e.requestee,t.requestee=e.requestee_details,t.reqPostcode=e.requestee_details.post_code,t.volunteerId=e.volunteer,t.volunteer=e.volunteer?e.volunteer_details:null,t.requestedVol=e.requested_vol?e.requested_vol_details.first_name+" "+e.requested_vol_details.last_name:null,t};Object(s.useEffect)((function(){var t={method:"GET",url:"https://letmeknow.uk/api/requestee/tasks/",timeout:8e3,params:{requid:e}};Oe()(t).then((function(t){var a=t.data.map((function(e){return g(e)}));b(a),t.data.length>0?(r(t.data[0].requestee),console.log("Requestee ID: ",i,typeof i)):(console.log("Asking user id.."),Oe.a.get("https://letmeknow.uk/api/accounts/get_user_by_id/",{params:{uId:e}}).then((function(e){console.log(e),console.log("Requestee id: ",e.data[0]),r(e.data[0])})).catch((function(e){console.log("error"),console.log(e.message,e.request)})))})).catch((function(e){console.log("error"),console.log(e.message),console.log(e.request),console.log(e.config)}))}),[]),Object(s.useEffect)((function(){Oe.a.get("https://letmeknow.uk/api/tasktypes/").then((function(e){O(e.data)})).catch((function(e){console.log("error"),console.log(e.message),console.log(e.request),console.log(e.config)}))}),[]);var f=function(e,t){t<0?function(e){var t=[].concat(Object(he.a)(d),[e]);b(t),console.log("All Tasks:",d)}(g(e)):function(e,t){var a=d.filter((function(e){return e.id!==t}));a=[].concat(Object(he.a)(a),[e]),b(a)}(g(e),t)},x={taskDetails:"",startDate:null,startTime:"08:00",endDate:null,endTime:"20:00"},v=o.a.useState(!1),y=Object(u.a)(v,2),w=y[0],k=y[1],C=o.a.useState(null),S=Object(u.a)(C,2),T=S[0],D=S[1],N=o.a.useState(x),P=Object(u.a)(N,2),q=P[0],A=P[1],R=o.a.useState(-1),_=Object(u.a)(R,2),F=_[0],L=_[1],E=o.a.useState(!1),W=Object(u.a)(E,2),B=W[0],M=W[1],U=o.a.useState({}),H=Object(u.a)(U,2),Y=H[0],V=H[1],z=o.a.useState(!1),G=Object(u.a)(z,2),K=G[0],Q=G[1],J=o.a.useState({}),X=Object(u.a)(J,2),Z=X[0],$=X[1],ee=Object(s.useState)({isOpen:!1,title:"",subTitle:""}),te=Object(u.a)(ee,2),ae=te[0],ne=te[1],se=function(e){return m.find((function(t){return t.id==e}))},oe=function(e){return d.find((function(t){return t.id===e}))};return Object(n.jsxs)("div",{className:"centered",children:[Object(n.jsx)(ht,{handleClickOpen:function(e,t){D(m.find((function(e){return e.task_type==t}))),k(!0)}}),Object(n.jsx)(Ot,{open:w,handleClose:function(){D(null),k(!1),A(x),L(-1)},taskType:T,defaultValues:q,updTaskId:F,updateTaskList:f,reqId:i}),Object(n.jsx)(gt,{taskList:d,handleCopy:function(e){var t=d.find((function(t){return t.id===e}));D(se(t.taskType)),A(Object(j.a)(Object(j.a)({},q),{},{taskDetails:t.taskDetails})),k(!0)},handleEdit:function(e){var t=oe(e);D(se(t.taskType)),A({taskDetails:t.taskDetails,startDate:Ge()(t.start).format("YYYY-MM-DD"),startTime:Ge()(t.start).format("HH:mm"),endDate:Ge()(t.end).format("YYYY-MM-DD"),endTime:Ge()(t.end).format("HH:mm")}),L(e),k(!0)},handleCancel:function(e){ne({isOpen:!0,title:"Are you sure you wish to cancel your Task?",subTitle:"Once canceled nobody will be able to help you with the task.",onConfirm:function(){ne(Object(j.a)(Object(j.a)({},ae),{},{isOpen:!1})),Oe.a.patch("https://letmeknow.uk/api/tasks/"+e+"/",{status:"CL"}).then((function(t){if(console.log("PATCH RESPONSE: ",t),console.log("PATCH RESPONSE DATA: ",t.data.id),200===t.status){var a=t.data;f(a,t.data.id),console.log("onSubmit: updated task with id: ",F),f(a,e)}else console.log("Something went wrong on task update..","Response status: ",t.status)})).catch((function(e){console.log(e.request),console.log(e.config)}))}})},handleContact:function(e,t){$(oe(t).volunteer),Q(!0)},handleSearchVol:function(e,t){var a=oe(t);M(!0),V(a)}}),Object(n.jsx)(yt,{open:K,handleClose:function(){Q(!1),$({})},volunteer:Z}),Object(n.jsx)(vt,{open:B,handleClose:function(){M(!1),V({})},data:Y,requestVolunteer:function(e,t){Oe.a.patch("https://letmeknow.uk/api/tasks/"+e+"/",{requested_vol:t}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}),Object(n.jsx)(Me,{confirmDialog:ae,setConfirmDialog:ne})]})},kt=function(){return Object(n.jsx)("div",{children:Object(n.jsx)(et,{})})},Ct=a(414);function St(e){var t=e.component,a=Object(Ct.a)(e,["component"]),s=I().currentUser;return Object(n.jsx)(T.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return console.log(s),s?Object(n.jsx)(t,Object(j.a)({},e)):Object(n.jsx)(T.a,{to:"/"})}}))}var Tt=function(){return Object(n.jsx)(D.a,{children:Object(n.jsx)(R,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(L,{}),Object(n.jsx)("div",{className:"AppContent",children:Object(n.jsxs)(T.d,{children:[Object(n.jsx)(T.b,{exact:!0,path:"/helpwhoneeds",children:Object(n.jsx)(W,{})}),Object(n.jsx)(T.b,{path:"/about",children:Object(n.jsx)(G,{})}),Object(n.jsx)(T.b,{path:"/contact",children:Object(n.jsx)(J,{})}),Object(n.jsx)(T.b,{path:"/login/:userType",children:Object(n.jsx)(de,{})}),Object(n.jsx)(T.b,{path:"/signup/:user",children:Object(n.jsx)(be,{})}),Object(n.jsx)(T.b,{path:"/forgotpassword/:user",children:Object(n.jsx)(Ne,{})}),Object(n.jsx)(T.b,{path:"/legal",children:Object(n.jsx)(M,{})}),Object(n.jsx)(T.b,{path:"/support",children:Object(n.jsx)(H,{})}),Object(n.jsx)(T.b,{path:"/privacy",children:Object(n.jsx)(Y,{})}),Object(n.jsx)(T.b,{path:"/cookie",children:Object(n.jsx)(U,{})}),Object(n.jsx)(T.b,{path:"/contact",children:Object(n.jsx)(J,{})}),Object(n.jsx)(T.b,{path:"/termconditions",children:Object(n.jsx)(V,{})}),Object(n.jsx)(St,{path:"/profile",component:Se}),Object(n.jsx)(St,{path:"/registrationpage/:user",component:qe}),Object(n.jsx)(St,{path:"/searchtask",component:et}),Object(n.jsx)(St,{path:"/mytask",component:kt}),Object(n.jsx)(St,{path:"/requestee/tasks",component:wt})]})}),Object(n.jsx)(Z,{})]})})})},Dt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,745)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),o(e),i(e)}))};r.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(Tt,{})}),document.getElementById("root")),Dt()}},[[699,1,2]]]);
//# sourceMappingURL=main.149d1a7b.chunk.js.map